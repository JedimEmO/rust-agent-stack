# Bidirectional Chat TUI Client

A terminal user interface (TUI) client for the bidirectional chat server, built with Ratatui and using the generated API client from the chat API crate.

## Default Test Credentials

The server comes with default admin users configured:
- **Admin**: Username: `admin`, Password: `admin123456`
- **Moderator**: Username: `moderator`, Password: `moderator123`

## Features

- **Terminal-based UI**: Clean, responsive interface using Ratatui
- **Full chat functionality**: Send/receive messages in real-time
- **Room management**: Join, leave, and switch between chat rooms
- **Authentication**: Login and registration with JWT-based auth
- **Type-safe API**: Uses the generated client from `jsonrpc_bidirectional_service!` macro
- **Real-time updates**: WebSocket-based bidirectional communication
- **Animated cat avatars**: Each user has a unique cat avatar with expressions
- **Visual typing indicators**: Cat avatars show "..." chat bubbles when users are typing

## Prerequisites

- The bidirectional chat server must be running (see `examples/bidirectional-chat/server`)
- Rust 1.75+ (for edition 2024 support)

## Running the Client

1. Start the chat server:
   ```bash
   cd examples/bidirectional-chat/server
   cargo run
   ```

2. In a new terminal, run the TUI client:
   ```bash
   cd examples/bidirectional-chat-tui
   cargo run
   ```

## Usage

### Login Screen
- **Tab**: Switch between username and password fields
- **Enter**: Login with entered credentials
- **Ctrl+R**: Switch to registration screen
- **Esc**: Quit the application

### Registration Screen
- **Tab**: Switch between username and password fields
- **Enter**: Register new account
- **Esc**: Return to login screen

### Room List Screen
- **1-9**: Join room by number
- **R**: Refresh room list
- **Q**: Quit and disconnect

### Chat Screen
- **Type message**: Enter your message
- **Enter**: Send message
- **Esc**: Leave room and return to room list
- **Backspace**: Delete character
- **/quit** or **/exit**: Quit the application completely

#### Visual Features in Chat
- **User sidebar**: Shows all users in the room with animated cat avatars
- **Typing indicators**: 
  - Yellow text at bottom shows "X is typing..."
  - Cat avatars display chat bubbles with animated dots when users are typing
  - Automatically clears after 5 seconds of inactivity

## Configuration

The client reads configuration from `.env` file:

```env
SERVER_URL=http://localhost:3000
```

## Architecture

The TUI client demonstrates proper usage of the generated bidirectional client API:

- **Type-safe client methods**: All RPC calls are strongly typed
- **Event handling**: Server notifications are handled via callbacks
- **Async/await**: Proper async handling with Tokio
- **State management**: Clean separation of UI state and network communication
- **Error handling**: Graceful error display in the UI

## Implementation Details

- Uses the `ChatServiceClient` generated by the `jsonrpc_bidirectional_service!` macro
- Implements proper WebSocket lifecycle management (connect/disconnect)
- Handles all server-to-client notifications (messages, user join/leave, etc.)
- Non-blocking UI with async event handling